<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="utf-8">
		<meta http-equiv="X-UA-Compatible" content="IE=edge">
		<meta name="viewport" content="width=device-width, initial-scale=1">
		<meta name="description" content="Craz'event - Gestionnaire d'événements">
		<meta name="author" content="">
		<!--<link rel="icon" href="../../favicon.ico">-->

		<title>Bootstrap Test</title>

		<!-- Bootstrap core CSS -->
		<link href="bootstrap/dist/css/bootstrap.min.css" rel="stylesheet">
		<!-- Bootstrap theme -->
		<link href="bootstrap/dist/css/bootstrap-theme.min.css" rel="stylesheet">
		<!-- Our theme -->
		<link href="bootstrap/dist/css/ce-style.css" rel="stylesheet">

		<!-- Custom styles for this template -->
		<link href="theme.css" rel="stylesheet">

		<!-- Just for debugging purposes. Don't actually copy these 2 lines! -->
		<!--[if lt IE 9]><script src="../../assets/js/ie8-responsive-file-warning.js"></script><![endif]-->
		<script src="../../assets/js/ie-emulation-modes-warning.js"></script>

		<!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
		<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->


		<!-- In production, only one script (pdf.js) is necessary -->
		<!-- In production, change the content of PDFJS.workerSrc below -->
		<script src="../../src/shared/util.js"></script>
		<script src="../../src/display/api.js"></script>
		<script src="../../src/display/metadata.js"></script>
		<script src="../../src/display/canvas.js"></script>
		<script src="../../src/display/webgl.js"></script>
		<script src="../../src/display/pattern_helper.js"></script>
		<script src="../../src/display/font_loader.js"></script>
		<script src="../../src/display/annotation_helper.js"></script>

		<script>
			// Specify the main script used to create a new PDF.JS web worker.
			// In production, leave this undefined or change it to point to the
			// combined `pdf.worker.js` file.
			PDFJS.workerSrc = '../../src/worker_loader.js';
		</script>
		<script src="test.js"></script>

	</head>

	<body role="document">

		<!-- Fixed navbar -->
		<div class="navbar navbar-inverse navbar-fixed-top" role="navigation">
			<div class="container">
				<div class="navbar-header">
					<button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target=".navbar-collapse">
						<span class="sr-only">Toggle navigation</span>
						<span class="icon-bar"></span>
						<span class="icon-bar"></span>
						<span class="icon-bar"></span>
					</button>
					<a class="navbar-brand" href="#">Test PDF</a>
				</div>
				<div class="navbar-collapse collapse">
					<ul class="nav navbar-nav">
						<li class="active"><a href="#">Home</a></li>
						<li><a href="#about">About</a></li>
						<li><a href="#contact">Contact</a></li>
						<li class="dropdown">
							<a href="#" class="dropdown-toggle" data-toggle="dropdown">Dropdown <span class="caret"></span></a>
							<ul class="dropdown-menu" role="menu">
								<li><a href="#">Action</a></li>
								<li><a href="#">Another action</a></li>
								<li><a href="#">Something else here</a></li>
								<li class="divider"></li>
								<li class="dropdown-header">Nav header</li>
								<li><a href="#">Separated link</a></li>
								<li><a href="#">One more separated link</a></li>
							</ul>
						</li>
					</ul>
				</div><!--/.nav-collapse -->
			</div>
		</div>

		<div class="container theme-showcase" role="main">

			<p>youhou</p>
			<span>Page: <span id="page_num"></span> / <span id="page_count"></span></span>
			<button id="prev">Previous</button>
			<button id="next">Next</button>
			<canvas id="the-canvas" style="border:1px solid black;"/>

		</div> <!-- /container -->


		<!-- Bootstrap core JavaScript
================================================== -->
		<!-- Placed at the end of the document so the pages load faster -->
		<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.1/jquery.min.js"></script>
		<script src="bootstrap/js/jquery.js"></script>
		<script src="bootstrap/js/bootstrap.min.js"></script>
		<!-- IE10 viewport hack for Surface/desktop Windows 8 bug -->
		<script src="../../assets/js/ie10-viewport-bug-workaround.js"></script>

		<script id="script">
			//
			// If absolute URL from the remote server is provided, configure the CORS
			// header on that server.
			//
			var url = '../../web/compressed.tracemonkey-pldi-09.pdf';


			//
			// Disable workers to avoid yet another cross-origin issue (workers need
			// the URL of the script to be loaded, and dynamically loading a cross-origin
			// script does not work).
			//
			// PDFJS.disableWorker = true;

			//
			// In cases when the pdf.worker.js is located at the different folder than the
			// pdf.js's one, or the pdf.js is executed via eval(), the workerSrc property
			// shall be specified.
			//
			// PDFJS.workerSrc = '../../build/pdf.worker.js';

			var pdfDoc = null,
				pageNum = 1,
				pageRendering = false,
				pageNumPending = null,
				scale = 0.8,
				canvas = document.getElementById('the-canvas'),
				ctx = canvas.getContext('2d');

   /**
   * Get page info from document, resize canvas accordingly, and render page.
   * @param num Page number.
   */
			function renderPage(num) {
				pageRendering = true;
				// Using promise to fetch the page
				pdfDoc.getPage(num).then(function(page) {
					var viewport = page.getViewport(scale);
					canvas.height = viewport.height;
					canvas.width = viewport.width;

					// Render PDF page into canvas context
					var renderContext = {
						canvasContext: ctx,
						viewport: viewport
					};
					var renderTask = page.render(renderContext);

					// Wait for rendering to finish
					renderTask.promise.then(function () {
						pageRendering = false;
						if (pageNumPending !== null) {
							// New page rendering is pending
							renderPage(pageNumPending);
							pageNumPending = null;
						}
					});
				});

				// Update page counters
				document.getElementById('page_num').textContent = pageNum;
			}

			/**
   * If another page rendering in progress, waits until the rendering is
   * finised. Otherwise, executes rendering immediately.
   */
			function queueRenderPage(num) {
				if (pageRendering) {
					pageNumPending = num;
				} else {
					renderPage(num);
				}
			}

   /**
   * Displays previous page.
   */
			function onPrevPage() {
				if (pageNum <= 1) {
					return;
				}
				pageNum--;
				queueRenderPage(pageNum);
			}
			document.getElementById('prev').addEventListener('click', onPrevPage);

   /**
   * Displays next page.
   */
			function onNextPage() {
				if (pageNum >= pdfDoc.numPages) {
					return;
				}
				pageNum++;
				queueRenderPage(pageNum);
			}
			document.getElementById('next').addEventListener('click', onNextPage);

   /**
   * Asynchronously downloads PDF.
   */
			PDFJS.getDocument(url).then(function (pdfDoc_) {
				pdfDoc = pdfDoc_;
				document.getElementById('page_count').textContent = pdfDoc.numPages;

				// Initial/first page rendering
				renderPage(pageNum);
			});
		</script>


	</body>
</html>